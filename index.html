<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <meta name="x5-orientation" content="landscape">
  <meta name="screen-orientation" content="landscape">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-touch-fullscreen" content="yes">
  <title>光遇·钢琴</title>
  <link href="https://cdn.tailwindcss.com" rel="stylesheet">
  <link href="./static/css/index.f663526a.css" rel="stylesheet">
  
  <style>
    /* 开屏动画容器：确保覆盖全屏且层级最高 */
    .splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.8s ease-out;
      position: relative;
      margin: 0;
      padding: 0;
    }
    
    /* 核心文字样式：统一过渡效果 */
    .splash-text {
      font-size: 2.5rem;
      font-weight: bold;
      text-align: center;
      opacity: 0;
      transition: opacity 1s ease-in-out;
      margin: 0;
    }
    
    /* 旋转动画：单独控制旋转过渡，避免影响透明度 */
    .splash-text.rotate {
      transition: transform 1.5s ease-in-out;
    }
    
    .splash-text.visible {
      opacity: 1;
    }
    
    .splash-text.rotated {
      transform: rotate(90deg);
    }
    
    /* 右下角小字：固定位置且过渡平滑 */
    .bottom-right-text {
      position: absolute;
      bottom: 20px;
      right: 20px;
      font-size: 1rem;
      color: #666;
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
      margin: 0;
    }
    
    .bottom-right-text.show {
      opacity: 1;
    }
    
    /* 主应用内容：确保动画结束后才显示 */
    #app {
      opacity: 0;
      transition: opacity 0.5s ease-in;
    }
    
    #app.visible {
      opacity: 1;
    }
  </style>
</head>

<body>
  <!-- 开屏动画容器：增加ID便于精准控制 -->
  <div class="splash-screen" id="splashScreen">
    <div class="splash-text" id="helloText">嗨,小七！</div>
    <div class="splash-text" id="rotateText">把手机横屏</div>
    <div class="bottom-right-text" id="bottomText">@易航</div>
  </div>
  
  <div id="app"></div>
  
  <script>

    // 开屏动画核心逻辑（修复隐藏问题）
    document.addEventListener('DOMContentLoaded', function() {
      // 缓存DOM元素，减少重复查询
      const splashScreen = document.getElementById('splashScreen');
      const helloText = document.getElementById('helloText');
      const rotateText = document.getElementById('rotateText');
      const bottomText = document.getElementById('bottomText');
      const app = document.getElementById('app');
      
      // 状态标记：防止重复执行隐藏逻辑
      let isSplashHidden = false;
      // 定时器变量：用于控制超时兜底和方向检测
      let orientationCheckTimer = null;
      let timeoutFallbackTimer = null;
      
      /**
       * 优化屏幕方向检测：
       * 1. 兼容设备物理旋转角度（0/90/180/270度）
       * 2. 处理宽高接近的特殊情况（避免误判）
       */
      function isLandscape() {
        // 获取屏幕旋转角度（兼容主流浏览器）
        const screenAngle = window.orientation || screen.orientation.angle;
        // 横屏条件：角度为90或270度，或宽明显大于高（差值>100px避免误判）
        return screenAngle === 90 || screenAngle === 270 || 
               (window.innerWidth - window.innerHeight) > 100;
      }
      
      /**
       * 统一隐藏开屏动画的逻辑：
       * 1. 防止重复执行
       * 2. 同步隐藏小字+显示主应用
       */
      function hideSplashScreen() {
        if (isSplashHidden) return;
        isSplashHidden = true;
        
        // 清除所有定时器，避免内存泄漏
        clearInterval(orientationCheckTimer);
        clearTimeout(timeoutFallbackTimer);
        
        // 隐藏右下角小字
        bottomText.classList.remove('show');
        // 淡出开屏动画
        splashScreen.style.opacity = '0';
        // 动画结束后移除容器+显示主应用
        setTimeout(() => {
          splashScreen.style.display = 'none';
          app.classList.add('visible');
        }, 800); // 与CSS过渡时间一致，确保平滑
      }
      
      // --------------- 动画时间线（按需求严格执行）---------------
      // 1. 页面加载0.5秒后：显示“你好”
      setTimeout(() => {
        helloText.classList.add('visible');
        
        // 2. “你好”显示2秒后：淡出“你好”
        setTimeout(() => {
          helloText.classList.remove('visible');
          
          // 3. 淡出后1秒：显示“请将手机横屏”
          setTimeout(() => {
            rotateText.classList.add('visible');
            
            // 4. “请将手机横屏”正常显示2秒
            setTimeout(() => {
              // 显示右下角“12345”
              bottomText.classList.add('show');
              // 开始缓慢旋转90度
              rotateText.classList.add('rotate', 'rotated');
              
              // 5. 旋转完成后保持2秒：同时开始检测横屏
              setTimeout(() => {
                // 持续检测横屏（每300ms一次）
                orientationCheckTimer = setInterval(() => {
                  if (isLandscape()) {
                    hideSplashScreen();
                  }
                }, 300);
                
                // 兜底机制：若10秒内未旋转，自动隐藏（避免永久卡住）
                timeoutFallbackTimer = setTimeout(() => {
                  hideSplashScreen();
                }, 5000);
                
              }, 2000); // 旋转后保持时间
              
            }, 2000); // “请将手机横屏”正常显示时间
            
          }, 1000); // “你好”淡出到“请将手机横屏”的间隔
        }, 2000); // “你好”显示时间
      }, 500); // 页面加载后延迟显示动画
      
      // 额外监听屏幕旋转事件（兼容手动旋转场景）
      window.addEventListener('resize', function() {
        if (isLandscape() && !isSplashHidden) {
          hideSplashScreen();
        }
      });
      
      // 兼容屏幕方向变化事件（部分设备不触发resize，触发orientationchange）
      window.addEventListener('orientationchange', function() {
        if (isLandscape() && !isSplashHidden) {
          hideSplashScreen();
        }
      });
    });
  </script>
  
  <!-- 原项目脚本（保留不动） -->
  <script src="./static/js/vendors_index.cd86757e.chunk.js"></script>
  <script src="./static/js/index.19ddcac8.js"></script>
</body>

</html>